BootStrap: localimage
From: /home/simone/nnDetection.sif
%post
    . /.singularity.d/env/10-docker*.sh

# GNU compiler
%post
    apt-get update -y
    DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \
        g++ \
        gcc \
        gfortran
    rm -rf /var/lib/apt/lists/*

%setup
    mkdir -p ${SINGULARITY_ROOTFS}/opt/code/Hive
%files
    requirements.txt /opt/code/Hive
    setup.cfg /opt/code/Hive
    versioneer.py /opt/code/Hive
    .gitattributes /opt/code/Hive
    setup.py /opt/code/Hive
    MANIFEST.in /opt/code/Hive
    README.md /opt/code/Hive

%setup
    mkdir -p ${SINGULARITY_ROOTFS}/opt/code/Hive/docs/source/apidocs/configs
%files
    ./docs/source/apidocs/configs/nnDet_config_template.json /opt/code/Hive/docs/source/apidocs/configs

%files
    ./Hive/ /opt/code/Hive

%files
    ./scripts/ /opt/code/Hive

%post
    cd /
    mkdir -p /opt/code/Hive
    cd /opt/code/Hive

# pip
%post
    apt-get update -y
    DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \
        
    rm -rf /var/lib/apt/lists/*
%post
    cd /
    pip --no-cache-dir install -e /opt/code/Hive

%runscript
    exec  "$@"


